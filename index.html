<!DOCTYPE html>
<html>
<head>
    <title>EVN HD Stream v2.11</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="margin:0; background:#000; color:white; text-align:center; font-family:sans-serif;">
    <div style="padding:10px; background:#222;">
        <h4 id="status" style="margin:0;">â³ Äang khá»Ÿi táº¡o...</h4>
    </div>
    <video id="video" autoplay playsinline style="width:100%; max-height:70vh;"></video>
    <canvas id="canvas" style="display:none;"></canvas>
    
    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const status = document.getElementById('status');
        
        // Äá»ŠA CHá»ˆ CLOUDFLARE Cá»¦A Báº N
        const ws = new WebSocket('wss://zealand-ottawa-mae-sword.trycloudflare.com'); 

        navigator.mediaDevices.getUserMedia({
            video: { facingMode: "environment", width: { ideal: 1280 }, height: { ideal: 720 } }
        }).then(stream => {
            video.srcObject = stream;
            status.innerText = "ğŸ“· Camera HD Ä‘Ã£ sáºµn sÃ ng";
            
            setInterval(() => {
                if (ws.readyState === WebSocket.OPEN) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    // Gá»­i áº£nh nÃ©n 60% Ä‘á»ƒ Ä‘áº£m báº£o tá»‘c Ä‘á»™ qua Internet
                    ws.send(canvas.toDataURL('image/jpeg', 0.6));
                }
            }, 100); 
        }).catch(err => {
            status.innerText = "âŒ Lá»—i: " + err;
        });

        ws.onopen = () => { status.innerText = "ğŸŸ¢ ÄÃƒ Káº¾T Ná»I SERVER AI"; status.style.color = "#00ff00"; };
        ws.onclose = () => { status.innerText = "ğŸ”´ Máº¤T Káº¾T Ná»I SERVER"; status.style.color = "#ff0000"; };
    </script>
</body>
</html>
